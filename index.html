<!DOCTYPE html>
<html lang="en" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="Luxury scarves and fashion accessories. Discover our premium collection of chiffon, silk, and printed scarves at competitive prices.">
    <meta name="keywords" content="scarves, luxury scarves, fashion accessories, silk scarves, chiffon scarves, printed scarves">
    <meta name="author" content="Soie Luxury">
    <meta property="og:title" content="Soie Luxury Scarves">
    <meta property="og:description" content="Discover premium quality scarves. Best prices and latest designs.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://soie-luxury.com">
    <meta property="og:image" content="https://i.postimg.cc/bw7Kkvhc/Chat-GPT-Image-Jul-14-2025-01-28-10-PM.png">
    <title>Soie Luxury Scarves</title>
    <link rel="icon" href="https://i.postimg.cc/bw7Kkvhc/Chat-GPT-Image-Jul-14-2025-01-28-10-PM.png" type="image/png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-storage-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
    <style>
        :root {
            --primary-color: #610404; /* Dark red */
            --secondary-color: #ffffff; /* White */
            --accent-color: #610404; /* Firebrick red */
            --discount-color: #610404; /* Brown red */
            --light-gray: #f9f9f9;
            --dark-gray: #333333;
            --blue-color: #1e90ff;
            --instagram-color: #E1306C;
            --facebook-color: #1877F2;
            --sold-out-color: rgba(0, 0, 0, 0.7);
            --menu-bg: linear-gradient(135deg, #fff5f5 0%, #ffe6e6 100%);
            --red-tag: #8B0000;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Tajawal', Arial, sans-serif;
            transition: all 0.3s ease;
        }
        
        body {
            background-color: var(--secondary-color);
            color: var(--dark-gray);
            padding-bottom: 100px;
            overflow-x: hidden;
        }
        
        body.dark-mode {
            --primary-color: #B22222;
            --secondary-color: #121212;
            --light-gray: #222222;
            --dark-gray: #f5f5f5;
            --sold-out-color: rgba(255, 255, 255, 0.7);
            --menu-bg: linear-gradient(135deg, #2a1a1a 0%, #1a1010 100%);
            --red-tag: #8B0000;
        }
    
        body.modal-open {
            overflow: hidden;
            height: 100%;
        }
    
        body.feedback-open {
            overflow: hidden;
            position: fixed;
            width: 100%;
        }
        
        /* Top Navigation Bar */
        .top-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
            background: var(--menu-bg);
            border-bottom: 1px solid rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 15px rgba(0,0,0,0.1);
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .logo-img {
            height: 80px;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
            transition: transform 0.3s ease;
        }
        
        .logo-img:hover {
            transform: rotate(5deg);
        }
        
        .dark-mode .logo-img {
            filter: brightness(0.9) drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }
        
        .nav-icons {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        
        .nav-icons a {
            color: var(--dark-gray);
            font-size: 1.5rem;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .nav-icons a:hover {
            color: var(--accent-color);
            transform: scale(1.1);
        }
        
        .cart-count, .wishlist-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: var(--accent-color);
            color: white;
            border-radius: 50%;
            width: 22px;
            height: 22px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0.8rem;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        /* Quick Menu */
        .quick-menu {
            display: flex;
            justify-content: space-around;
            padding: 15px 0;
            background: var(--menu-bg);
            border-bottom: 1px solid rgba(0,0,0,0.1);
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            overflow-x: auto;
            white-space: nowrap;
        }
        
        .menu-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: 0.9rem;
            color: var(--dark-gray);
            text-decoration: none;
            transition: all 0.3s ease;
            padding: 8px 12px;
            border-radius: 25px;
            background: rgba(255,255,255,0.2);
            min-width: 70px;
        }
        
        .menu-item i {
            font-size: 1.5rem;
            margin-bottom: 5px;
            color: var(--primary-color);
            transition: all 0.3s ease;
        }
        
        .menu-item:hover {
            background-color: rgba(139, 0, 0, 0.1);
            transform: translateY(-3px);
        }
        
        .menu-item.active {
            color: var(--accent-color);
            font-weight: 500;
            background: rgba(139, 0, 0, 0.1);
            border: 1px solid rgba(139, 0, 0, 0.3);
        }
        
        .menu-item.active i {
            color: var(--accent-color);
        }
        
        /* Categories Bar */
        .categories-bar {
            display: flex;
            overflow-x: auto;
            padding: 10px 0;
            background-color: var(--secondary-color);
            border-bottom: 1px solid var(--light-gray);
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE and Edge */
        }
        
        .categories-bar::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Opera */
        }
        
        .category-item {
            padding: 8px 15px;
            margin: 0 5px;
            white-space: nowrap;
            cursor: pointer;
            border-radius: 20px;
            background-color: var(--light-gray);
            color: var(--dark-gray);
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }
        
        .category-item.active {
            background-color: var(--accent-color);
            color: white;
        }
        
        /* Filter Bar */
        .filter-bar {
            display: flex;
            justify-content: space-around;
            padding: 12px 0;
            background-color: var(--secondary-color);
            border-bottom: 1px solid var(--light-gray);
            overflow-x: auto;
            white-space: nowrap;
        }
        
        .filter-item {
            display: flex;
            align-items: center;
            font-size: 1rem;
            color: var(--dark-gray);
            cursor: pointer;
            padding: 8px 15px;
            border-radius: 25px;
            background: rgba(255,255,255,0.2);
            margin: 0 5px;
        }
        
        .filter-item.active {
            background-color: var(--accent-color);
            color: white;
        }
        
        .filter-item i {
            margin-left: 5px;
            font-size: 1.1rem;
        }
        
        /* Products */
        .main-container {
            padding: 0;
            margin-top: 15px;
        }
        
        .section-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            font-weight: 600;
            padding: 0 15px;
            color: var(--dark-gray);
        }
        
        .products-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            padding: 0 15px;
        }
        
        .product-card {
            background-color: var(--secondary-color);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            position: relative;
            border: 1px solid rgba(0,0,0,0.05);
            transition: transform 0.3s, box-shadow 0.3s;
            display: flex;
            flex-direction: column;
            height: 100%;
        }
    
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.15);
            border-color: rgba(139, 0, 0, 0.3);
        }
        
        .product-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: var(--discount-color);
            color: white;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
            z-index: 1;
        }
        
        .sold-out-badge {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: var(--sold-out-color);
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 1.4rem;
            font-weight: 700;
            z-index: 2;
            pointer-events: none;
            text-transform: uppercase;
        }
        
        .product-image-container {
            position: relative;
            width: 100%;
            height: 200px;
            overflow: hidden;
            border-bottom: 1px solid rgba(0,0,0,0.05);
            cursor: pointer;
            background-color: #f5f5f5;
        }
        
        .product-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
            position: absolute;
            top: 0;
            left: 0;
            opacity: 1;
            transition: opacity 0.5s ease;
            background-color: white;
            padding: 10px;
        }
        
        .product-image.secondary {
            opacity: 0;
        }
        
        .product-image-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.8);
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 3;
            color: var(--dark-gray);
            opacity: 1;
            transition: opacity 0.3s;
        }
    
        .product-image-container:hover .product-image-nav {
            opacity: 1;
        }
        
        .dark-mode .product-image-nav {
            background: rgba(0,0,0,0.7);
            color: var(--secondary-color);
        }
        
        .product-image-prev {
            right: 10px;
        }
        
        .product-image-next {
            left: 10px;
        }
        
        .product-info {
            padding: 15px;
            position: relative;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        
        .wishlist-btn {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(255,255,255,0.9);
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 2;
            opacity: 1;
            transition: opacity 0.3s;
        }
    
        .product-card:hover .wishlist-btn {
            opacity: 1;
        }
        
        .dark-mode .wishlist-btn {
            background: rgba(0,0,0,0.8);
        }
        
        .wishlist-btn i {
            color: var(--dark-gray);
            font-size: 1.1rem;
        }
        
        .wishlist-btn.active i {
            color: var(--discount-color);
        }
        
        .product-title {
            font-size: 1.1rem;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--dark-gray);
            line-height: 1.3;
        }
        
        .product-price {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .current-price {
            font-weight: 700;
            color: var(--primary-color);
            font-size: 1.1rem;
        }
        
        .old-price {
            font-size: 0.9rem;
            color: #999;
            text-decoration: line-through;
            margin-right: 10px;
        }
        
        .add-to-cart {
            width: 100%;
            padding: 10px;
            background-color: var(--accent-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, background-color 0.3s;
            margin-top: auto;
        }
        
        .add-to-cart:hover {
            background-color: #8B0000;
        }
        
        .add-to-cart:active {
            transform: scale(0.95);
        }
        
        .add-to-cart.sold-out {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        
        /* Floating Cart */
        .floating-cart {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background-color: var(--accent-color);
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            z-index: 100;
            transition: transform 0.3s;
        }
    
        .floating-cart:hover {
            transform: scale(1.1);
        }
        
        .floating-cart-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: var(--primary-color);
            color: var(--secondary-color);
            border-radius: 50%;
            width: 25px;
            height: 25px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        /* Dark Mode Toggle */
        .dark-mode-toggle {
            background: none;
            border: none;
            color: var(--dark-gray);
            font-size: 1.5rem;
            cursor: pointer;
            transition: transform 0.3s;
        }
    
        .dark-mode-toggle:hover {
            transform: scale(1.2);
        }
        
        /* Cart Modal */
        .cart-modal {
            position: fixed;
            top: 0;
            right: 0;
            bottom: 0;
            width: 100%;
            max-width: 100%;
            background-color: var(--secondary-color);
            box-shadow: -2px 0 15px rgba(0, 0, 0, 0.1);
            transform: translateX(100%);
            transition: transform 0.3s ease;
            z-index: 1000;
            display: flex;
            flex-direction: column;
        }
        
        .cart-modal.open {
            transform: translateX(0);
        }
        
        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.2rem;
            border-bottom: 1px solid var(--light-gray);
        }
        
        .cart-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--dark-gray);
        }
        
        .close-cart {
            background: none;
            border: none;
            font-size: 1.8rem;
            cursor: pointer;
            color: var(--dark-gray);
            transition: transform 0.3s;
        }
    
        .close-cart:hover {
            transform: rotate(90deg);
        }
        
        .cart-items {
            flex: 1;
            overflow-y: auto;
            padding: 1.2rem;
        }
        
        .cart-item {
            display: flex;
            margin-bottom: 1.2rem;
            border-bottom: 1px solid var(--light-gray);
            padding-bottom: 1.2rem;
        }
        
        .cart-item-image {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 8px;
            margin-left: 1rem;
        }
        
        .cart-item-details {
            flex: 1;
        }
        
        .cart-item-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--dark-gray);
            font-size: 1.1rem;
        }
        
        .cart-item-price {
            color: var(--dark-gray);
            margin-bottom: 0.5rem;
            opacity: 0.7;
            font-size: 1rem;
        }
        
        .cart-item-quantity {
            display: flex;
            align-items: center;
        }
        
        .quantity-btn {
            background-color: var(--light-gray);
            border: none;
            width: 30px;
            height: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            font-size: 1rem;
            border-radius: 8px;
            color: var(--dark-gray);
            transition: background-color 0.3s;
        }
    
        .quantity-btn:hover {
            background-color: var(--accent-color);
            color: white;
        }
        
        .quantity-input {
            width: 40px;
            height: 30px;
            text-align: center;
            border: 1px solid var(--light-gray);
            border-radius: 8px;
            margin: 0 0.5rem;
            background-color: var(--secondary-color);
            color: var(--dark-gray);
            font-size: 1rem;
        }
        
        .remove-item {
            color: #ff4444;
            background: none;
            border: none;
            cursor: pointer;
            margin-top: 0.5rem;
            font-size: 0.85rem;
            transition: transform 0.3s;
        }
    
        .remove-item:hover {
            transform: scale(1.1);
        }
        
        .cart-summary {
            padding: 1.2rem;
            border-top: 1px solid var(--light-gray);
        }
        
        .cart-total {
            display: flex;
            justify-content: space-between;
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1.2rem;
            color: var(--dark-gray);
        }
        
        .checkout-btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 1rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1.1rem;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.6rem;
            transition: transform 0.3s;
        }
    
        .checkout-btn:hover {
            transform: translateY(-3px);
        }
        
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s;
        }
        
        .overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .empty-cart-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 1.8rem;
            text-align: center;
            height: 100%;
        }
        
        .empty-cart-image {
            width: 180px;
            height: 180px;
            object-fit: contain;
            margin-bottom: 1.2rem;
        }
        
        .empty-cart-message {
            font-size: 1.1rem;
            color: var(--dark-gray);
            margin-bottom: 1.2rem;
            line-height: 1.5;
            opacity: 0.7;
        }
        
        .start-shopping-btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 0.9rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            text-decoration: none;
            font-size: 1rem;
            transition: transform 0.3s;
        }
    
        .start-shopping-btn:hover {
            transform: scale(1.05);
        }
    
        /* Footer */
        .footer {
            text-align: center;
            padding: 30px 15px;
            margin-top: 40px;
            color: var(--dark-gray);
            font-size: 0.9rem;
            background: var(--menu-bg);
            border-top: 1px solid rgba(139, 0, 0, 0.2);
        }
    
        .footer a {
            color: var(--accent-color);
            text-decoration: none;
            font-weight: bold;
            transition: color 0.3s;
        }
    
        .footer a:hover {
            color: var(--primary-color);
        }
    
        .social-icons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }
    
        .social-icon {
            font-size: 1.5rem;
            color: var(--dark-gray);
            transition: all 0.3s;
            position: relative;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            background: rgba(139, 0, 0, 0.1);
        }
    
        .social-icon:hover {
            transform: scale(1.2);
            background: rgba(139, 0, 0, 0.2);
        }
    
        .social-icon.whatsapp {
            color: var(--accent-color);
        }
    
        .social-icon.instagram {
            color: var(--instagram-color);
        }
    
        .social-icon.facebook {
            color: var(--facebook-color);
        }

        .instagram-tag {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: var(--red-tag);
            color: white;
            font-size: 0.6rem;
            padding: 2px 5px;
            border-radius: 10px;
            font-weight: bold;
        }
    
        /* Filter Modal */
        .filter-modal {
            position: fixed;
            top: 0;
            right: 0;
            bottom: 0;
            width: 100%;
            max-width: 100%;
            background-color: var(--secondary-color);
            box-shadow: -2px 0 15px rgba(0, 0, 0, 0.1);
            transform: translateX(100%);
            transition: transform 0.3s ease;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            padding: 20px;
        }
    
        .filter-modal.open {
            transform: translateX(0);
        }
    
        .filter-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
    
        .filter-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--dark-gray);
        }
    
        .close-filter {
            background: none;
            border: none;
            font-size: 1.8rem;
            cursor: pointer;
            color: var(--dark-gray);
            transition: transform 0.3s;
        }
    
        .close-filter:hover {
            transform: rotate(90deg);
        }
    
        .filter-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
    
        .filter-section {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
    
        .filter-section-title {
            font-weight: 600;
            font-size: 1.2rem;
            color: var(--dark-gray);
        }
    
        .filter-checkbox {
            display: flex;
            align-items: center;
            gap: 10px;
        }
    
        .apply-filters {
            margin-top: 20px;
            padding: 12px;
            background-color: var(--accent-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s;
        }
    
        .apply-filters:hover {
            transform: translateY(-3px);
        }
    
        /* Sort Modal */
        .sort-modal {
            position: fixed;
            top: 0;
            right: 0;
            bottom: 0;
            width: 100%;
            max-width: 100%;
            background-color: var(--secondary-color);
            box-shadow: -2px 0 15px rgba(0, 0, 0, 0.1);
            transform: translateX(100%);
            transition: transform 0.3s ease;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            padding: 20px;
        }
    
        .sort-modal.open {
            transform: translateX(0);
        }
    
        .sort-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
    
        .sort-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--dark-gray);
        }
    
        .close-sort {
            background: none;
            border: none;
            font-size: 1.8rem;
            cursor: pointer;
            color: var(--dark-gray);
            transition: transform 0.3s;
        }
    
        .close-sort:hover {
            transform: rotate(90deg);
        }
    
        .sort-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
    
        .sort-option {
            padding: 12px;
            border-radius: 8px;
            background-color: var(--light-gray);
            cursor: pointer;
            transition: all 0.3s;
            color: var(--dark-gray);
            font-size: 1.1rem;
        }
    
        .sort-option:hover {
            transform: translateX(-5px);
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
        }
    
        .sort-option.active {
            background-color: var(--accent-color);
            color: white;
        }
    
        /* Feedback Modal */
        .feedback-modal {
            position: fixed;
            top: 0;
            right: 0;
            bottom: 0;
            width: 100%;
            max-width: 100%;
            background-color: var(--secondary-color);
            box-shadow: -2px 0 15px rgba(0, 0, 0, 0.1);
            transform: translateX(100%);
            transition: transform 0.3s ease;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            padding: 20px;
            overflow-y: auto;
        }
    
        .feedback-modal.open {
            transform: translateX(0);
        }
    
        .feedback-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            position: sticky;
            top: 0;
            background-color: var(--secondary-color);
            padding: 10px 0;
            z-index: 1;
        }
    
        .feedback-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--dark-gray);
        }
    
        .close-feedback {
            background: none;
            border: none;
            font-size: 1.8rem;
            cursor: pointer;
            color: var(--dark-gray);
            transition: transform 0.3s;
        }
    
        .close-feedback:hover {
            transform: rotate(90deg);
        }
    
        .feedback-gallery {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-top: 20px;
            padding-bottom: 20px;
        }
    
        .feedback-item {
            background-color: var(--light-gray);
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
    
        .feedback-image {
            width: 100%;
            height: auto;
            border-radius: 8px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: transform 0.3s;
        }
    
        .feedback-image:hover {
            transform: scale(1.02);
        }
    
        .feedback-text {
            color: var(--dark-gray);
            font-size: 0.95rem;
            margin-top: 8px;
        }
    
        .feedback-customer {
            display: flex;
            align-items: center;
            margin-top: 10px;
            font-size: 0.85rem;
            color: var(--dark-gray);
            opacity: 0.8;
        }
    
        .feedback-customer i {
            margin-left: 8px;
            color: var(--primary-color);
        }
    
        /* Fullscreen Image Viewer */
        .fullscreen-image-viewer {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 1100;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s;
        }
    
        .fullscreen-image-viewer.active {
            opacity: 1;
            visibility: visible;
        }
    
        .fullscreen-image {
            max-width: 95%;
            max-height: 95%;
            object-fit: contain;
        }
    
        .close-fullscreen {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: white;
            font-size: 1.8rem;
            cursor: pointer;
            transition: transform 0.3s;
        }
    
        .close-fullscreen:hover {
            transform: rotate(90deg);
        }
    
        /* Custom Notification */
        .custom-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: var(--secondary-color);
            color: var(--dark-gray);
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
            z-index: 1100;
            display: flex;
            align-items: center;
            gap: 10px;
            transform: translateX(150%);
            transition: transform 0.3s ease;
            max-width: 90%;
            border-left: 5px solid var(--accent-color);
        }
    
        .custom-notification.show {
            transform: translateX(0);
        }
    
        .custom-notification i {
            font-size: 1.3rem;
            color: var(--accent-color);
        }
    
        /* Login Modal Styles */
        .login-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1100;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s;
        }
    
        .login-modal.active {
            opacity: 1;
            visibility: visible;
        }
    
        .login-container {
            background-color: var(--secondary-color);
            padding: 25px;
            border-radius: 10px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            position: relative;
        }
    
        .login-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            text-align: center;
            color: var(--dark-gray);
        }
    
        .login-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
    
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
    
        .form-group label {
            font-weight: 500;
            color: var(--dark-gray);
            font-size: 1rem;
        }
    
        .form-group input {
            padding: 10px;
            border: 1px solid var(--light-gray);
            border-radius: 6px;
            background-color: var(--secondary-color);
            color: var(--dark-gray);
            font-size: 1rem;
        }
    
        .login-btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 12px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 10px;
            font-size: 1.1rem;
        }
    
        .close-login {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.8rem;
            cursor: pointer;
            color: var(--dark-gray);
        }
    
        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-right: 15px;
            color: var(--dark-gray);
            position: relative;
        }
    
        .user-icon {
            position: relative;
            cursor: pointer;
        }
    
        .logout-menu {
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--secondary-color);
            border: 1px solid var(--light-gray);
            border-radius: 8px;
            padding: 10px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.1);
            display: none;
            z-index: 100;
            min-width: 120px;
        }
    
        .user-icon:hover .logout-menu {
            display: block;
        }
    
        .logout-btn {
            background: none;
            border: none;
            color: var(--dark-gray);
            cursor: pointer;
            font-size: 0.95rem;
            display: block;
            width: 100%;
            text-align: center;
            padding: 6px;
            border-radius: 6px;
        }
    
        .logout-btn:hover {
            background-color: var(--light-gray);
        }

        /* Admin Dashboard Styles */
        .admin-dashboard {
            position: fixed;
            top: 0;
            right: 0;
            bottom: 0;
            width: 100%;
            max-width: 800px;
            background-color: var(--secondary-color);
            box-shadow: -2px 0 15px rgba(0, 0, 0, 0.1);
            z-index: 1100;
            display: flex;
            flex-direction: column;
            padding: 20px;
            overflow-y: auto;
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--light-gray);
        }

        .admin-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--dark-gray);
        }

        .close-admin {
            background: none;
            border: none;
            font-size: 1.8rem;
            cursor: pointer;
            color: var(--dark-gray);
        }

        .admin-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
            padding-bottom: 10px;
        }

        .admin-tab {
            padding: 10px 20px;
            background: var(--light-gray);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            white-space: nowrap;
            font-size: 0.9rem;
        }

        .admin-tab.active {
            background: var(--accent-color);
            color: white;
        }

        .admin-tab-content {
            display: none;
        }

        .admin-tab-content.active {
            display: block;
        }

        #productForm {
            display: grid;
            gap: 15px;
            margin-bottom: 30px;
        }

        #productForm input, 
        #productForm select, 
        #productForm textarea {
            padding: 10px;
            border: 1px solid var(--light-gray);
            border-radius: 6px;
            background-color: var(--secondary-color);
            color: var(--dark-gray);
            font-size: 1rem;
        }

        #productForm textarea {
            min-height: 100px;
            resize: vertical;
        }

        #productForm select {
            width: 100%;
        }

        .products-list {
            display: grid;
            gap: 15px;
        }

        .product-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: var(--light-gray);
            border-radius: 8px;
            flex-wrap: wrap;
        }

        .product-item-info {
            flex: 1;
            min-width: 200px;
        }

        .product-item-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .product-item button {
            padding: 8px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .edit-product {
            background-color: var(--accent-color);
            color: white;
        }

        .delete-product {
            background-color: #ff4444;
            color: white;
        }

        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }

        .metric-card {
            background: var(--light-gray);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }

        .metric-card h4 {
            margin-bottom: 10px;
            font-size: 1rem;
        }

        .metric-card p {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--accent-color);
        }

        /* Image Link Input Styles */
        .image-link-container {
            margin: 15px 0;
        }
        
        .image-link-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark-gray);
        }
        
        .image-link-input {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--light-gray);
            border-radius: 6px;
            margin-bottom: 10px;
            font-size: 0.9rem;
        }
        
        .add-image-btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .image-preview-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        
        .image-preview-item {
            position: relative;
            width: 80px;
            height: 80px;
        }
        
        .image-preview-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 6px;
            border: 1px solid var(--light-gray);
        }
        
        .remove-image-btn {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: #ff4444;
            color: white;
            border: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 0.7rem;
        }

        /* Categories Management */
        .categories-management {
            margin-top: 20px;
        }

        .categories-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .category-tag {
            background-color: var(--light-gray);
            padding: 5px 10px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .delete-category {
            background: none;
            border: none;
            color: #ff4444;
            cursor: pointer;
            font-size: 0.8rem;
        }

        /* Checkout Form Styles */
        .checkout-form {
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .checkout-form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .checkout-form-group label {
            font-weight: 500;
            font-size: 1rem;
        }
        
        .checkout-form-group input, 
        .checkout-form-group select, 
        .checkout-form-group textarea {
            padding: 10px;
            border: 1px solid var(--light-gray);
            border-radius: 6px;
            font-size: 1rem;
            background-color: var(--secondary-color);
            color: var(--dark-gray);
        }
        
        .checkout-form-group textarea {
            min-height: 80px;
        }
        
        .checkout-form-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .checkout-form-btn {
            padding: 12px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            font-size: 1rem;
            border: none;
        }
        
        .checkout-form-btn.primary {
            background-color: var(--accent-color);
            color: white;
            flex: 1;
        }
        
        .checkout-form-btn.secondary {
            background-color: var(--light-gray);
            color: var(--dark-gray);
        }
    
        @media (min-width: 768px) {
            .products-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .logo-img {
                height: 90px;
            }
            
            .product-image-container {
                height: 250px;
            }
            
            .main-container {
                max-width: 1200px;
                margin: 0 auto;
            }

            .feedback-gallery {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .filter-modal,
            .sort-modal,
            .feedback-modal,
            .cart-modal {
                max-width: 450px;
            }

            .admin-tabs {
                overflow-x: visible;
            }

            .product-item-actions {
                margin-top: 0;
            }
        }

        @media (min-width: 1024px) {
            .products-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .logo-img {
                height: 100px;
            }
        }
    </style>
</head>
<body>
    <!-- Top Navigation Bar -->
    <nav class="top-nav">
        <div class="logo-container">
            <img src="https://i.postimg.cc/bw7Kkvhc/Chat-GPT-Image-Jul-14-2025-01-28-10-PM.png" alt="Soie Luxury Logo" class="logo-img">
        </div>
        <div class="nav-icons">
            <button class="dark-mode-toggle" id="darkModeToggle">
                <i class="fas fa-moon"></i>
            </button>
            <div id="userInfoContainer" class="user-info" style="display: none;">
                <div class="user-icon">
                    <i class="fas fa-user"></i>
                    <div class="logout-menu">
                        <button class="logout-btn" id="logoutBtn">Logout</button>
                    </div>
                </div>
            </div>
            <a href="#" id="wishlistIcon"><i class="far fa-heart"></i><span class="wishlist-count" id="wishlistCount">0</span></a>
            <a href="#" id="cartIcon"><i class="fas fa-shopping-bag"></i><span class="cart-count" id="cartCount">0</span></a>
            <a href="#" id="loginIcon"><i class="fas fa-user"></i></a>
        </div>
    </nav>
    
    <!-- Quick Menu -->
    <div class="quick-menu">
        <a href="#" class="menu-item active" id="mainPageBtn">
            <i class="fas fa-home"></i>
            <span>Home</span>
        </a>
        <a href="#" class="menu-item" id="bestSellersBtn">
            <i class="fas fa-crown"></i>
            <span>Best Sellers</span>
        </a>
        <a href="#" class="menu-item" id="wishlistBtn">
            <i class="fas fa-heart"></i>
            <span>Wishlist</span>
        </a>
        <a href="#" class="menu-item" id="offersBtn">
            <i class="fas fa-percent"></i>
            <span>Offers</span>
        </a>
    </div>
    
    <!-- Categories Bar -->
    <div class="categories-bar" id="categoriesBar">
        <!-- Categories will be loaded from Firebase -->
    </div>
    
    <!-- Filter Bar -->
    <div class="filter-bar">
        <div class="filter-item" id="filterBtn">
            <i class="fas fa-sliders-h"></i>
            <span>Filter</span>
        </div>
        <div class="filter-item" id="sortBtn">
            <i class="fas fa-sort-amount-down"></i>
            <span>Sort</span>
        </div>
        <div class="filter-item" id="feedbackBtn">
            <i class="fas fa-images"></i>
            <span>Feedback</span>
        </div>
    </div>
    
    <!-- Products Section -->
    <div class="main-container">
        <h2 class="section-title" id="sectionTitle">Our Collection</h2>
        <div class="products-grid" id="productsGrid">
            <!-- Products will be loaded from Firebase -->
        </div>
    </div>
    
    <!-- Floating Cart -->
    <div class="floating-cart" id="floatingCart">
        <i class="fas fa-shopping-cart"></i>
        <span class="floating-cart-count" id="floatingCartCount">0</span>
    </div>
    
    <!-- Cart Modal -->
    <div class="cart-modal" id="cartModal">
        <div class="cart-header">
            <h3 class="cart-title">Shopping Cart</h3>
            <button class="close-cart" id="closeCart">&times;</button>
        </div>
        <div class="cart-items" id="cartItems">
            <div class="empty-cart-container">
                <img src="https://i.postimg.cc/xCBq4xzP/Chat-GPT-Image-Jun-2-2025-03-42-36-PM.png" alt="Empty Cart" class="empty-cart-image">
                <p class="empty-cart-message">Your cart is empty<br>You haven't added any products yet<br>Browse our store and choose what you like!</p>
                <button class="start-shopping-btn" id="startShoppingBtn">Start Shopping Now</button>
            </div>
        </div>
        <div class="cart-summary">
            <div class="cart-total">
                <span>Total:</span>
                <span id="cartTotalPrice">0 EGP</span>
            </div>
            <button class="checkout-btn" id="checkoutBtn">
                <i class="fab fa-whatsapp"></i>
                Checkout via WhatsApp
            </button>
        </div>
    </div>
    
    <!-- Filter Modal -->
    <div class="filter-modal" id="filterModal">
        <div class="filter-header">
            <h3 class="filter-title">Filter Products</h3>
            <button class="close-filter" id="closeFilter">&times;</button>
        </div>
        <div class="filter-options">
            <div class="filter-section">
                <h4 class="filter-section-title">Price Range</h4>
                <div class="filter-checkbox">
                    <input type="checkbox" id="price1" name="price" value="0-200">
                    <label for="price1">Under 200 EGP</label>
                </div>
                <div class="filter-checkbox">
                    <input type="checkbox" id="price2" name="price" value="200-400">
                    <label for="price2">200 - 400 EGP</label>
                </div>
                <div class="filter-checkbox">
                    <input type="checkbox" id="price3" name="price" value="400+">
                    <label for="price3">Over 400 EGP</label>
                </div>
            </div>
            <div class="filter-section">
                <h4 class="filter-section-title">Availability</h4>
                <div class="filter-checkbox">
                    <input type="checkbox" id="inStock" name="availability" value="in-stock">
                    <label for="inStock">In Stock</label>
                </div>
                <div class="filter-checkbox">
                    <input type="checkbox" id="outOfStock" name="availability" value="out-of-stock">
                    <label for="outOfStock">Out of Stock</label>
                </div>
            </div>
        </div>
        <button class="apply-filters" id="applyFilters">Apply Filters</button>
    </div>
    
    <!-- Sort Modal -->
    <div class="sort-modal" id="sortModal">
        <div class="sort-header">
            <h3 class="sort-title">Sort By</h3>
            <button class="close-sort" id="closeSort">&times;</button>
        </div>
        <div class="sort-options">
            <div class="sort-option" data-sort="price-low-high">Price: Low to High</div>
            <div class="sort-option" data-sort="price-high-low">Price: High to Low</div>
            <div class="sort-option" data-sort="newest">Newest Arrivals</div>
            <div class="sort-option" data-sort="popularity">Popularity</div>
        </div>
    </div>
    
    <!-- Feedback Modal -->
    <div class="feedback-modal" id="feedbackModal">
        <div class="feedback-header">
            <h3 class="feedback-title">Customer Feedback</h3>
            <button class="close-feedback" id="closeFeedback">&times;</button>
        </div>
        <div class="feedback-gallery" id="feedbackGallery">
            <!-- Feedback items will be loaded from Firebase -->
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div id="adminDashboard" class="admin-dashboard" style="display: none;">
        <div class="admin-header">
            <h2 class="admin-title">Admin Dashboard</h2>
            <button id="closeAdminDashboard" class="close-admin"></button>
        </div>
        <div class="admin-tabs">
            <button class="admin-tab active" data-tab="products">Products</button>
            <button class="admin-tab" data-tab="categories">Categories</button>
            <button class="admin-tab" data-tab="feedback">Feedback</button>
            <button class="admin-tab" data-tab="analytics">Analytics</button>
        </div>
        <div class="admin-content">
            <div id="productsTab" class="admin-tab-content active">
                <h3>Manage Products</h3>
                <form id="productForm">
                    <input type="text" id="productId" placeholder="Product ID" hidden>
                    <input type="text" id="productName" placeholder="Product Name" required>
                    <input type="number" id="productPrice" placeholder="Price" required>
                    <select id="productCategory" required>
                        <option value="">Select Category</option>
                        <!-- Categories will be loaded dynamically -->
                    </select>
                    <textarea id="productDescription" placeholder="Product Description (Optional)"></textarea>
                    
                    <!-- Image link section -->
                    <div class="image-link-container">
                        <label class="image-link-label">Product Images (Add image URLs - max 5)</label>
                        <input type="text" class="image-link-input" id="imageLinkInput" placeholder="Paste image URL here">
                        <button type="button" class="add-image-btn" id="addImageBtn">
                            <i class="fas fa-plus"></i> Add Image
                        </button>
                        <div class="image-preview-container" id="imagePreviewContainer"></div>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="productBestSeller"> Best Seller
                        </label>
                        <label>
                            <input type="checkbox" id="productHasOffer"> Has Offer
                        </label>
                        <label>
                            <input type="checkbox" id="productSoldOut"> Sold Out
                        </label>
                    </div>
                    <button type="submit" id="saveProductBtn" class="login-btn">Save Product</button>
                </form>
                <div id="productsList" class="products-list">
                    <!-- Products will be loaded here -->
                </div>
            </div>
            
            <div id="categoriesTab" class="admin-tab-content">
                <h3>Manage Categories</h3>
                <div class="categories-management">
                    <div class="form-group">
                        <label for="newCategoryName">New Category Name</label>
                        <input type="text" id="newCategoryName" placeholder="Enter category name">
                        <button id="addCategoryBtn" class="login-btn" style="margin-top: 10px;">Add Category</button>
                    </div>
                    <h4 style="margin-top: 20px;">Existing Categories</h4>
                    <div class="categories-list" id="categoriesList">
                        <!-- Categories will be loaded here -->
                    </div>
                </div>
            </div>
            
            <div id="feedbackTab" class="admin-tab-content">
                <h3>Manage Feedback</h3>
                <form id="feedbackForm">
                    <div class="form-group">
                        <label for="feedbackImageUrl">Feedback Image URL</label>
                        <input type="text" id="feedbackImageUrl" placeholder="Paste image URL here">
                    </div>
                    <div class="form-group">
                        <label for="feedbackText">Feedback Text (Optional)</label>
                        <textarea id="feedbackText" placeholder="Enter feedback text"></textarea>
                    </div>
                    <button type="button" id="addFeedbackBtn" class="login-btn">Add Feedback</button>
                </form>
                <div id="adminFeedbackGallery" class="feedback-gallery" style="margin-top: 20px;">
                    <!-- Feedback items will be loaded here -->
                </div>
            </div>
            
            <div id="analyticsTab" class="admin-tab-content">
                <h3>Store Analytics</h3>
                <div class="analytics-grid">
                    <div class="metric-card">
                        <h4>Total Products</h4>
                        <p id="totalProducts">0</p>
                    </div>
                    <div class="metric-card">
                        <h4>Total Sales</h4>
                        <p id="totalSales">0 EGP</p>
                    </div>
                    <div class="metric-card">
                        <h4>Total Orders</h4>
                        <p id="totalOrders">0</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Checkout Form Modal -->
    <div class="login-modal" id="checkoutFormModal">
        <div class="login-container">
            <h2 class="login-title">Checkout Information</h2>
            <form class="checkout-form" id="checkoutForm">
                <div class="checkout-form-group">
                    <label for="customerName">Full Name</label>
                    <input type="text" id="customerName" required>
                </div>
                <div class="checkout-form-group">
                    <label for="customerPhone">Phone Number</label>
                    <input type="tel" id="customerPhone" required>
                </div>
                <div class="checkout-form-group">
                    <label for="customerPhone2">Alternate Phone (Optional)</label>
                    <input type="tel" id="customerPhone2">
                </div>
                <div class="checkout-form-group">
                    <label for="customerAddress">Address</label>
                    <input type="text" id="customerAddress" required>
                </div>
                <div class="checkout-form-group">
                    <label for="customerGovernorate">Governorate</label>
                    <select id="customerGovernorate" required>
                        <option value="">Select Governorate</option>
                        <option value="Cairo">Cairo</option>
                        <option value="Giza">Giza</option>
                        <option value="Alexandria">Alexandria</option>
                        <option value="Dakahlia">Dakahlia</option>
                        <option value="Red Sea">Red Sea</option>
                        <option value="Beheira">Beheira</option>
                        <option value="Fayoum">Fayoum</option>
                        <option value="Gharbia">Gharbia</option>
                        <option value="Ismailia">Ismailia</option>
                        <option value="Menofia">Menofia</option>
                        <option value="Minya">Minya</option>
                        <option value="Qaliubiya">Qaliubiya</option>
                        <option value="New Valley">New Valley</option>
                        <option value="Suez">Suez</option>
                        <option value="Aswan">Aswan</option>
                        <option value="Assiut">Assiut</option>
                        <option value="Beni Suef">Beni Suef</option>
                        <option value="Port Said">Port Said</option>
                        <option value="Damietta">Damietta</option>
                        <option value="Sharkia">Sharkia</option>
                        <option value="South Sinai">South Sinai</option>
                        <option value="Kafr Al Sheikh">Kafr Al Sheikh</option>
                        <option value="Matrouh">Matrouh</option>
                        <option value="Luxor">Luxor</option>
                        <option value="Qena">Qena</option>
                        <option value="North Sinai">North Sinai</option>
                        <option value="Sohag">Sohag</option>
                    </select>
                </div>
                <div class="checkout-form-group">
                    <label for="customerNotes">Notes (Optional)</label>
                    <textarea id="customerNotes" placeholder="Any special instructions"></textarea>
                </div>
                <div class="checkout-form-actions">
                    <button type="button" class="checkout-form-btn secondary" id="cancelCheckoutBtn">Cancel</button>
                    <button type="submit" class="checkout-form-btn primary">Complete Order</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Fullscreen Image Viewer -->
    <div class="fullscreen-image-viewer" id="fullscreenViewer">
        <button class="close-fullscreen" id="closeFullscreen">&times;</button>
        <img src="" alt="Fullscreen View" class="fullscreen-image" id="fullscreenImage">
    </div>
    
    <!-- Login Modal -->
    <div class="login-modal" id="loginModal">
        <div class="login-container">
            <h2 class="login-title">Sign In</h2>
            <form class="login-form" id="loginForm">
                <div class="form-group">
                    <label for="userEmail">Email</label>
                    <input type="email" id="userEmail" required placeholder="Your email">
                </div>
                <div class="form-group">
                    <label for="userPassword">Password</label>
                    <input type="password" id="userPassword" required placeholder="Your password">
                </div>
                <button type="submit" class="login-btn">Sign In</button>
            </form>
        </div>
        <button class="close-login" id="closeLogin">&times;</button>
    </div>
    
    <!-- Overlay -->
    <div class="overlay" id="overlay"></div>
    
    <!-- Custom Notification -->
    <div class="custom-notification" id="customNotification">
        <i class="fas fa-exclamation-circle"></i>
        <span id="notificationMessage">This product is sold out!</span>
    </div>
    
    <!-- Footer -->
    <div class="footer">
        <p> 2025 Soie.All Rights Reserved.</p>
        <div class="social-icons">
            <a href="https://wa.me/201066367019" target="_blank" class="social-icon whatsapp">
                <i class="fab fa-whatsapp"></i>
            </a>
            <a href="https://www.instagram.com/soie.egy?igsh=dzRscWFqMzQxenBr" target="_blank" class="social-icon instagram">
                <i class="fab fa-instagram"></i>
            </a>
            <a href="" target="_blank" class="social-icon facebook">
                <i class="fab fa-facebook"></i>
            </a>
        </div>
        <div class="powered-by">
            Powered by <a href="https://wa.me/01156823048" target="_blank">Omar Mostafa</a>
        </div>
    </div>
    
   <script>
    // Firebase configuration - REPLACE WITH YOUR ACTUAL CONFIG
    const firebaseConfig = {
        apiKey: "AIzaSyABCDEFGHIJKLMNOPQRSTUVWXYZ12345678",
        authDomain: "allura-1f714.firebaseapp.com",
        databaseURL: "https://allura-1f714-default-rtdb.firebaseio.com",
        projectId: "allura-1f714",
        storageBucket: "allura-1f714.appspot.com",
        messagingSenderId: "123456789012",
        appId: "1:123456789012:web:abcdef1234567890abcdef"
    };

    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const database = firebase.database();
    const storage = firebase.storage();
    const auth = firebase.auth();

    // Admin credentials (for demo only - use proper auth in production)
    const ADMIN_EMAIL = "admin@soie.com";
    const ADMIN_PASSWORD = "admin123";
    
    // Global variables
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    let wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
    let currentView = 'all';
    let currentSort = 'newest';
    let currentFilters = [];
    let products = [];
    let categories = [];
    let feedbackItems = [];
    let currentUser = null;
    let productImages = [];
    let customerInfo = JSON.parse(localStorage.getItem('customerInfo')) || null;
    let currentCategory = 'all';

    // DOM Elements
    const cartCount = document.getElementById('cartCount');
    const floatingCartCount = document.getElementById('floatingCartCount');
    const wishlistCount = document.getElementById('wishlistCount');
    const floatingCart = document.getElementById('floatingCart');
    const cartModal = document.getElementById('cartModal');
    const filterModal = document.getElementById('filterModal');
    const sortModal = document.getElementById('sortModal');
    const feedbackModal = document.getElementById('feedbackModal');
    const feedbackGallery = document.getElementById('feedbackGallery');
    const adminDashboard = document.getElementById('adminDashboard');
    const loginModal = document.getElementById('loginModal');
    const checkoutFormModal = document.getElementById('checkoutFormModal');
    const fullscreenViewer = document.getElementById('fullscreenViewer');
    const fullscreenImage = document.getElementById('fullscreenImage');
    const overlay = document.getElementById('overlay');
    const closeCartBtn = document.getElementById('closeCart');
    const closeFilterBtn = document.getElementById('closeFilter');
    const closeSortBtn = document.getElementById('closeSort');
    const closeFeedbackBtn = document.getElementById('closeFeedback');
    const closeAdminBtn = document.getElementById('closeAdminDashboard');
    const closeLoginBtn = document.getElementById('closeLogin');
    const closeFullscreenBtn = document.getElementById('closeFullscreen');
    const cartItemsContainer = document.getElementById('cartItems');
    const cartTotalPrice = document.getElementById('cartTotalPrice');
    const checkoutBtn = document.getElementById('checkoutBtn');
    const productsGrid = document.getElementById('productsGrid');
    const cartIcon = document.getElementById('cartIcon');
    const wishlistIcon = document.getElementById('wishlistIcon');
    const loginIcon = document.getElementById('loginIcon');
    const darkModeToggle = document.getElementById('darkModeToggle');
    const sectionTitle = document.getElementById('sectionTitle');
    const filterBtn = document.getElementById('filterBtn');
    const sortBtn = document.getElementById('sortBtn');
    const feedbackBtn = document.getElementById('feedbackBtn');
    const applyFiltersBtn = document.getElementById('applyFilters');
    const loginForm = document.getElementById('loginForm');
    const productForm = document.getElementById('productForm');
    const feedbackForm = document.getElementById('feedbackForm');
    const checkoutForm = document.getElementById('checkoutForm');
    const userInfoContainer = document.getElementById('userInfoContainer');
    const logoutBtn = document.getElementById('logoutBtn');
    const customNotification = document.getElementById('customNotification');
    const notificationMessage = document.getElementById('notificationMessage');
    const imageLinkInput = document.getElementById('imageLinkInput');
    const addImageBtn = document.getElementById('addImageBtn');
    const imagePreviewContainer = document.getElementById('imagePreviewContainer');
    const feedbackImageUrl = document.getElementById('feedbackImageUrl');
    const feedbackText = document.getElementById('feedbackText');
    const addFeedbackBtn = document.getElementById('addFeedbackBtn');
    const adminFeedbackGallery = document.getElementById('adminFeedbackGallery');
    const customerName = document.getElementById('customerName');
    const customerPhone = document.getElementById('customerPhone');
    const customerPhone2 = document.getElementById('customerPhone2');
    const customerAddress = document.getElementById('customerAddress');
    const customerGovernorate = document.getElementById('customerGovernorate');
    const customerNotes = document.getElementById('customerNotes');
    const cancelCheckoutBtn = document.getElementById('cancelCheckoutBtn');
    const startShoppingBtn = document.getElementById('startShoppingBtn');
    const productCategorySelect = document.getElementById('productCategory');
    const newCategoryName = document.getElementById('newCategoryName');
    const addCategoryBtn = document.getElementById('addCategoryBtn');
    const categoriesList = document.getElementById('categoriesList');
    const saveProductBtn = document.getElementById('saveProductBtn');
    const categoriesBar = document.getElementById('categoriesBar');
    const totalProductsElement = document.getElementById('totalProducts');
    const totalSalesElement = document.getElementById('totalSales');
    const totalOrdersElement = document.getElementById('totalOrders');

    // Initialize Store
    function initStore() {
        // Load dark mode preference
        const savedDarkMode = localStorage.getItem('darkMode') === 'true';
        if (savedDarkMode) {
            document.body.classList.add('dark-mode');
            darkModeToggle.innerHTML = '<i class="fas fa-sun"></i>';
        }
        
        // Check if user is already logged in
        const savedUser = localStorage.getItem('currentUser');
        if (savedUser) {
            currentUser = JSON.parse(savedUser);
            updateUserDisplay();
        }
        
        // Initialize cart and wishlist counts
        updateCart();
        updateWishlist();
        
        // Set up real-time listeners
        setupProductsListener();
        setupCategoriesListener();
        setupFeedbackListener();
        setupOrdersListener();
        
        // Load saved customer info if exists
        if (customerInfo) {
            customerName.value = customerInfo.name || '';
            customerPhone.value = customerInfo.phone || '';
            customerPhone2.value = customerInfo.phone2 || '';
            customerAddress.value = customerInfo.address || '';
            customerGovernorate.value = customerInfo.governorate || '';
            customerNotes.value = customerInfo.notes || '';
        }
        
        // Setup event listeners
        setupEventListeners();
    }

    // Set up real-time listener for products
    function setupProductsListener() {
        database.ref('products').orderByChild('createdAt').on('value', (snapshot) => {
            products = [];
            snapshot.forEach((childSnapshot) => {
                products.push({
                    id: childSnapshot.key,
                    ...childSnapshot.val()
                });
            });
            renderProducts();
            setupImageSliders();
            startImageRotation();
            
            // Update admin products list if dashboard is open
            if (adminDashboard.style.display === 'block') {
                loadAdminProducts();
            }
        }, (error) => {
            console.error("Error getting products: ", error);
            showNotification("Error loading products");
        });
    }

    // Set up real-time listener for categories
    function setupCategoriesListener() {
        database.ref('categories').on('value', (snapshot) => {
            categories = [];
            snapshot.forEach((childSnapshot) => {
                categories.push({
                    id: childSnapshot.key,
                    name: childSnapshot.val().name
                });
            });
            updateCategorySelect();
            renderCategoriesList();
            renderCategoriesBar();
        });
    }

    // Set up real-time listener for feedback
    function setupFeedbackListener() {
        database.ref('feedback').on('value', (snapshot) => {
            feedbackItems = [];
            snapshot.forEach((childSnapshot) => {
                feedbackItems.push({
                    id: childSnapshot.key,
                    ...childSnapshot.val()
                });
            });
            renderFeedback();
            renderAdminFeedback();
        });
    }

    // Set up real-time listener for orders
    function setupOrdersListener() {
        database.ref('orders').on('value', (snapshot) => {
            let totalSales = 0;
            let totalOrders = 0;
            
            snapshot.forEach((childSnapshot) => {
                const order = childSnapshot.val();
                totalSales += order.total || 0;
                totalOrders++;
            });
            
            // Update analytics
            totalSalesElement.textContent = totalSales.toLocaleString() + ' EGP';
            totalOrdersElement.textContent = totalOrders;
        });
    }

    // Render categories bar
    function renderCategoriesBar() {
        categoriesBar.innerHTML = '';
        
        // Add "All" category
        const allCategory = document.createElement('div');
        allCategory.className = `category-item ${currentCategory === 'all' ? 'active' : ''}`;
        allCategory.textContent = 'All';
        allCategory.addEventListener('click', () => {
            currentCategory = 'all';
            renderCategoriesBar();
            renderProducts();
        });
        categoriesBar.appendChild(allCategory);
        
        // Add other categories
        categories.forEach(category => {
            const categoryElement = document.createElement('div');
            categoryElement.className = `category-item ${currentCategory === category.name ? 'active' : ''}`;
            categoryElement.textContent = category.name;
            categoryElement.addEventListener('click', () => {
                currentCategory = category.name;
                renderCategoriesBar();
                renderProducts();
            });
            categoriesBar.appendChild(categoryElement);
        });
    }

    // Update category select dropdown
    function updateCategorySelect() {
        productCategorySelect.innerHTML = '<option value="">Select Category</option>';
        categories.forEach(category => {
            const option = document.createElement('option');
            option.value = category.name;
            option.textContent = category.name;
            productCategorySelect.appendChild(option);
        });
    }

    // Render categories list in admin
    function renderCategoriesList() {
        categoriesList.innerHTML = categories.map(category => `
            <div class="category-tag">
                ${category.name}
                <button class="delete-category" data-id="${category.id}">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        `).join('');
        
        // Add event listeners to delete buttons
        document.querySelectorAll('.delete-category').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.stopPropagation();
                const categoryId = btn.dataset.id;
                deleteCategory(categoryId);
            });
        });
    }

    // Render feedback items
    function renderFeedback() {
        feedbackGallery.innerHTML = feedbackItems.map(item => `
            <div class="feedback-item">
                ${item.imageUrl ? `<img src="${item.imageUrl}" alt="Customer Feedback" class="feedback-image">` : ''}
                ${item.text ? `<p class="feedback-text">${item.text}</p>` : ''}
            </div>
        `).join('');
    }

    // Render feedback items in admin
    function renderAdminFeedback() {
        adminFeedbackGallery.innerHTML = feedbackItems.map(item => `
            <div class="feedback-item">
                ${item.imageUrl ? `<img src="${item.imageUrl}" alt="Customer Feedback" class="feedback-image">` : ''}
                ${item.text ? `<p class="feedback-text">${item.text}</p>` : ''}
                <button class="delete-feedback" data-id="${item.id}" style="margin-top: 10px; background: #ff4444; color: white; border: none; padding: 5px 10px; border-radius: 4px;">Delete</button>
            </div>
        `).join('');
        
        // Add event listeners to delete buttons
        document.querySelectorAll('.delete-feedback').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const feedbackId = btn.dataset.id;
                deleteFeedback(feedbackId);
            });
        });
    }

    // Add new category
    function addCategory() {
        const name = newCategoryName.value.trim();
        if (!name) {
            showNotification('Please enter a category name');
            return;
        }
        
        database.ref('categories').push({
            name: name
        }).then(() => {
            newCategoryName.value = '';
            showNotification('Category added successfully');
        }).catch(error => {
            console.error("Error adding category:", error);
            showNotification('Error adding category');
        });
    }

    // Delete category
    function deleteCategory(categoryId) {
        if (!confirm('Are you sure you want to delete this category?')) return;
        
        database.ref(`categories/${categoryId}`).remove()
            .then(() => {
                showNotification('Category deleted successfully');
            })
            .catch(error => {
                console.error("Error deleting category:", error);
                showNotification('Error deleting category');
            });
    }

    // Add feedback
    function addFeedback() {
        const imageUrl = feedbackImageUrl.value.trim();
        const text = feedbackText.value.trim();
        
        if (!imageUrl) {
            showNotification('Please enter an image URL');
            return;
        }
        
        const feedbackData = {
            imageUrl: imageUrl,
            text: text || '',
            createdAt: firebase.database.ServerValue.TIMESTAMP
        };
        
        database.ref('feedback').push(feedbackData)
            .then(() => {
                feedbackImageUrl.value = '';
                feedbackText.value = '';
                showNotification('Feedback added successfully');
            })
            .catch(error => {
                console.error("Error adding feedback:", error);
                showNotification('Error adding feedback');
            });
    }

    // Delete feedback
    function deleteFeedback(feedbackId) {
        if (!confirm('Are you sure you want to delete this feedback?')) return;
        
        database.ref(`feedback/${feedbackId}`).remove()
            .then(() => {
                showNotification('Feedback deleted successfully');
            })
            .catch(error => {
                console.error("Error deleting feedback:", error);
                showNotification('Error deleting feedback');
            });
    }

    // Render Products
    function renderProducts() {
        let filteredProducts = products;
        
        // Filter by current view
        if (currentView === 'bestsellers') {
            filteredProducts = filteredProducts.filter(product => product.isBestSeller);
            sectionTitle.textContent = 'Best Sellers';
        } else if (currentView === 'offers') {
            filteredProducts = filteredProducts.filter(product => product.hasOffer);
            sectionTitle.textContent = 'Special Offers';
        } else if (currentView === 'wishlist') {
            filteredProducts = filteredProducts.filter(product => wishlist.includes(product.id));
            sectionTitle.textContent = 'Your Wishlist';
        } else {
            sectionTitle.textContent = 'Our Collection';
        }
        
        // Filter by category
        if (currentCategory !== 'all') {
            filteredProducts = filteredProducts.filter(product => product.category === currentCategory);
        }
        
        // Apply filters
        if (currentFilters.length > 0) {
            filteredProducts = filteredProducts.filter(product => {
                // Price filter
                const priceFilters = currentFilters.filter(f => f.type === 'price');
                if (priceFilters.length > 0) {
                    const matchesPrice = priceFilters.some(filter => {
                        if (filter.value === '0-200') return product.price < 200;
                        if (filter.value === '200-400') return product.price >= 200 && product.price <= 400;
                        if (filter.value === '400+') return product.price > 400;
                        return true;
                    });
                    if (!matchesPrice) return false;
                }
                
                // Availability filter
                const availabilityFilters = currentFilters.filter(f => f.type === 'availability');
                if (availabilityFilters.length > 0) {
                    const inStockFilter = availabilityFilters.find(f => f.value === 'in-stock');
                    const outOfStockFilter = availabilityFilters.find(f => f.value === 'out-of-stock');
                    
                    if (inStockFilter && outOfStockFilter) {
                        // Both selected, show all
                        return true;
                    } else if (inStockFilter) {
                        return !product.soldOut;
                    } else if (outOfStockFilter) {
                        return product.soldOut;
                    }
                }
                
                return true;
            });
        }
        
        // Apply sorting
        filteredProducts = sortProducts(filteredProducts);
        
        productsGrid.innerHTML = filteredProducts.map(product => `
            <div class="product-card" data-id="${product.id}" data-category="${product.category}" 
                 data-bestseller="${product.isBestSeller}" data-offer="${product.hasOffer}">
                ${product.hasOffer ? `<span class="product-badge">${Math.round((1 - (product.price / (product.oldPrice || product.price * 1.2))) * 100)}% OFF</span>` : ''}
                ${product.soldOut ? `<div class="sold-out-badge">SOLD OUT</div>` : ''}
                <button class="wishlist-btn ${wishlist.includes(product.id) ? 'active' : ''}" data-id="${product.id}">
                    <i class="${wishlist.includes(product.id) ? 'fas' : 'far'} fa-heart"></i>
                </button>
                <div class="product-image-container" data-id="${product.id}">
                    ${product.images && product.images.length > 0 ? product.images.map((img, index) => `
                        <img src="${img}" alt="${product.name}" class="product-image ${index === 0 ? '' : 'secondary'}" data-product-id="${product.id}" data-image-index="${index}">
                    `).join('') : '<div style="background:#eee;width:100%;height:100%;"></div>'}
                    ${product.images && product.images.length > 1 ? `
                        <button class="product-image-nav product-image-prev" data-id="${product.id}">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                        <button class="product-image-nav product-image-next" data-id="${product.id}">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                    ` : ''}
                </div>
                <div class="product-info">
                    <h3 class="product-title">${product.name}</h3>
                    <div class="product-price">
                        ${product.hasOffer ? `<span class="old-price">${Math.round(product.price * 1.2)} EGP</span>` : ''}
                        <span class="current-price">${product.price} EGP</span>
                    </div>
                    <button class="add-to-cart ${product.soldOut ? 'sold-out' : ''}" data-id="${product.id}" ${product.soldOut ? 'disabled' : ''}>
                        ${product.soldOut ? 'Sold Out' : 'Add to Cart'}
                    </button>
                </div>
            </div>
        `).join('');
        
        // Add click events to wishlist buttons
        document.querySelectorAll('.wishlist-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                toggleWishlist(this.dataset.id);
            });
        });
        
        // Add click events to add to cart buttons
        document.querySelectorAll('.add-to-cart:not(.sold-out)').forEach(btn => {
            btn.addEventListener('click', function() {
                addToCart(this.dataset.id);
            });
        });

        // Add click events to sold out buttons
        document.querySelectorAll('.add-to-cart.sold-out').forEach(btn => {
            btn.addEventListener('click', function() {
                showNotification('This product is sold out!');
            });
        });
        
        // Add click events to product images for fullscreen view
        document.querySelectorAll('.product-image').forEach(img => {
            img.addEventListener('click', function(e) {
                // Prevent triggering when clicking navigation buttons
                if (e.target.classList.contains('product-image-nav')) return;
                
                const productId = this.dataset.productId;
                const product = products.find(p => p.id === productId);
                if (product) {
                    openFullscreen(this.src);
                }
            });
        });
    }

    // Setup Image Sliders
    function setupImageSliders() {
        document.querySelectorAll('.product-image-nav').forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.stopPropagation(); // Prevent triggering the fullscreen click
                const productId = this.dataset.id;
                const container = document.querySelector(`.product-image-container[data-id="${productId}"]`);
                const images = container.querySelectorAll('.product-image');
                const currentIndex = Array.from(images).findIndex(img => img.style.opacity === '1' || img.style.opacity === '');
                
                let nextIndex;
                if (this.classList.contains('product-image-prev')) {
                    nextIndex = (currentIndex - 1 + images.length) % images.length;
                } else {
                    nextIndex = (currentIndex + 1) % images.length;
                }
                
                images[currentIndex].style.opacity = '0';
                images[nextIndex].style.opacity = '1';
            });
        });
    }

    // Start Image Rotation
    function startImageRotation() {
        document.querySelectorAll('.product-image-container').forEach(container => {
            const images = container.querySelectorAll('.product-image');
            if (images.length < 2) return;
            
            let currentIndex = 0;
            setInterval(() => {
                images[currentIndex].style.opacity = '0';
                currentIndex = (currentIndex + 1) % images.length;
                images[currentIndex].style.opacity = '1';
            }, 5000);
        });
    }

    // Sort Products
    function sortProducts(products) {
        switch (currentSort) {
            case 'price-low-high':
                return [...products].sort((a, b) => a.price - b.price);
            case 'price-high-low':
                return [...products].sort((a, b) => b.price - a.price);
            case 'newest':
                return [...products].sort((a, b) => (b.createdAt || 0) - (a.createdAt || 0));
            case 'popularity':
                return [...products].sort((a, b) => (b.isBestSeller ? 1 : 0) - (a.isBestSeller ? 1 : 0));
            default:
                return products;
        }
    }

    // Show Custom Notification
    function showNotification(message) {
        notificationMessage.textContent = message;
        customNotification.classList.add('show');
        
        setTimeout(() => {
            customNotification.classList.remove('show');
        }, 3000);
    }

    // Open Fullscreen Image
    function openFullscreen(imageSrc) {
        fullscreenImage.src = imageSrc;
        fullscreenViewer.classList.add('active');
        overlay.classList.add('active');
        document.body.style.overflow = 'hidden';
    }

    // Close Fullscreen Image
    function closeFullscreen() {
        fullscreenViewer.classList.remove('active');
        overlay.classList.remove('active');
        document.body.style.overflow = 'auto';
    }

    // Open Feedback Modal
    function openFeedbackModal() {
        feedbackModal.classList.add('open');
        overlay.classList.add('active');
        document.body.classList.add('feedback-open');
        document.body.style.overflow = 'hidden';
    }

    // Close Feedback Modal
    function closeFeedbackModal() {
        feedbackModal.classList.remove('open');
        overlay.classList.remove('active');
        document.body.classList.remove('feedback-open');
        document.body.style.overflow = 'auto';
    }

    // Set Active Menu
    function setActiveMenu(activeId) {
        document.querySelectorAll('.menu-item').forEach(item => {
            item.classList.remove('active');
        });
        document.getElementById(activeId).classList.add('active');
    }

    // Toggle Dark Mode
    function toggleDarkMode() {
        document.body.classList.toggle('dark-mode');
        const isDarkMode = document.body.classList.contains('dark-mode');
        localStorage.setItem('darkMode', isDarkMode);
        
        if (isDarkMode) {
            darkModeToggle.innerHTML = '<i class="fas fa-sun"></i>';
        } else {
            darkModeToggle.innerHTML = '<i class="fas fa-moon"></i>';
        }
    }

    // Open Cart
    function openCart() {
        cartModal.classList.add('open');
        overlay.classList.add('active');
        document.body.style.overflow = 'hidden';
        updateCart();
    }

    // Close Cart
    function closeCart() {
        cartModal.classList.remove('open');
        overlay.classList.remove('active');
        document.body.style.overflow = 'auto';
    }

    // Open Filter Modal
    function openFilterModal() {
        filterModal.classList.add('open');
        overlay.classList.add('active');
        document.body.style.overflow = 'hidden';
    }

    // Close Filter Modal
    function closeFilterModal() {
        filterModal.classList.remove('open');
        overlay.classList.remove('active');
        document.body.style.overflow = 'auto';
    }

    // Open Sort Modal
    function openSortModal() {
        sortModal.classList.add('open');
        overlay.classList.add('active');
        document.body.style.overflow = 'hidden';
        
        // Set active sort option
        document.querySelectorAll('.sort-option').forEach(option => {
            option.classList.remove('active');
            if (option.dataset.sort === currentSort) {
                option.classList.add('active');
            }
        });
    }

    // Close Sort Modal
    function closeSortModal() {
        sortModal.classList.remove('open');
        overlay.classList.remove('active');
        document.body.style.overflow = 'auto';
    }

    // Open Checkout Form
    function openCheckoutForm() {
        checkoutFormModal.classList.add('active');
        overlay.classList.add('active');
        document.body.style.overflow = 'hidden';
    }

    // Close Checkout Form
    function closeCheckoutForm() {
        checkoutFormModal.classList.remove('active');
        overlay.classList.remove('active');
        document.body.style.overflow = 'auto';
    }

    // Apply Filters
    function applyFilters() {
        currentFilters = [];
        
        // Get price filters
        document.querySelectorAll('input[name="price"]:checked').forEach(checkbox => {
            currentFilters.push({
                type: 'price',
                value: checkbox.value
            });
        });
        
        // Get availability filters
        document.querySelectorAll('input[name="availability"]:checked').forEach(checkbox => {
            currentFilters.push({
                type: 'availability',
                value: checkbox.value
            });
        });
        
        renderProducts();
        setupImageSliders();
        closeFilterModal();
    }

    // Add to Cart
    function addToCart(productId) {
        const product = products.find(p => p.id === productId);
        
        if (!product) return;
        
        if (product.soldOut) {
            showNotification('This product is sold out!');
            return;
        }
        
        const existingItem = cart.find(item => item.id === productId);
        
        if (existingItem) {
            existingItem.quantity += 1;
        } else {
            cart.push({
                id: product.id,
                name: product.name,
                price: product.price,
                image: product.images ? product.images[0] : '',
                quantity: 1
            });
        }
        
        updateCart();
        saveCartToLocalStorage();
        
        // Notification effect
        const button = document.querySelector(`.add-to-cart[data-id="${productId}"]`);
        if (button) {
            button.textContent = 'Added!';
            setTimeout(() => {
                button.textContent = 'Add to Cart';
            }, 2000);
        }
    }

    // Update Cart
    function updateCart() {
        // Update count
        const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
        cartCount.textContent = totalItems;
        floatingCartCount.textContent = totalItems;
        
        // Update total
        const totalPrice = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        cartTotalPrice.textContent = totalPrice.toLocaleString() + ' EGP';
        
        // Render items
        renderCartItems();
    }

    // Update Wishlist
    function updateWishlist() {
        wishlistCount.textContent = wishlist.length;
    }

    // Update user display in navbar
    function updateUserDisplay() {
        if (currentUser) {
            userInfoContainer.style.display = 'flex';
            loginIcon.style.display = 'none';
        } else {
            userInfoContainer.style.display = 'none';
            loginIcon.style.display = 'block';
        }
    }

    // Toggle Wishlist
    function toggleWishlist(productId) {
        const index = wishlist.indexOf(productId);
        if (index === -1) {
            wishlist.push(productId);
        } else {
            wishlist.splice(index, 1);
        }
        
        localStorage.setItem('wishlist', JSON.stringify(wishlist));
        updateWishlist();
        
        // Update heart icon on product
        const btn = document.querySelector(`.wishlist-btn[data-id="${productId}"]`);
        if (btn) {
            btn.classList.toggle('active');
            btn.innerHTML = `<i class="${wishlist.includes(productId) ? 'fas' : 'far'} fa-heart"></i>`;
        }
        
        // If we're in wishlist view, update the list
        if (currentView === 'wishlist') {
            renderProducts();
            setupImageSliders();
        }
    }

    // Render Cart Items
    function renderCartItems() {
        if (cart.length === 0) {
            cartItemsContainer.innerHTML = `
                <div class="empty-cart-container">
                    <img src="https://i.postimg.cc/xCBq4xzP/Chat-GPT-Image-Jun-2-2025-03-42-36-PM.png" alt="Empty Cart" class="empty-cart-image">
                    <p class="empty-cart-message">Your cart is empty<br>You haven't added any products yet<br>Browse our store and choose what you like!</p>
                    <button class="start-shopping-btn" id="startShoppingBtn">Start Shopping Now</button>
                </div>
            `;
            // Re-attach event listener to the new button
            document.getElementById('startShoppingBtn').addEventListener('click', closeCart);
            return;
        }
        
        cartItemsContainer.innerHTML = cart.map(item => `
            <div class="cart-item">
                <img src="${item.image}" alt="${item.name}" class="cart-item-image">
                <div class="cart-item-details">
                    <h4 class="cart-item-title">${item.name}</h4>
                    <div class="cart-item-price">${item.price.toLocaleString()} EGP</div>
                    <div class="cart-item-quantity">
                        <button class="quantity-btn minus" data-id="${item.id}">-</button>
                        <input type="number" class="quantity-input" value="${item.quantity}" min="1" data-id="${item.id}">
                        <button class="quantity-btn plus" data-id="${item.id}">+</button>
                    </div>
                    <button class="remove-item" data-id="${item.id}">Remove</button>
                </div>
            </div>
        `).join('');
        
        // Setup quantity events
        document.querySelectorAll('.quantity-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const productId = e.target.dataset.id;
                const input = document.querySelector(`.quantity-input[data-id="${productId}"]`);
                let value = parseInt(input.value);
                
                if (e.target.classList.contains('plus')) {
                    input.value = value + 1;
                } else if (value > 1) {
                    input.value = value - 1;
                }
                
                updateCartItem(productId, parseInt(input.value));
            });
        });
        
        // Setup input events
        document.querySelectorAll('.quantity-input').forEach(input => {
            input.addEventListener('change', (e) => {
                const productId = e.target.dataset.id;
                const value = parseInt(e.target.value) || 1;
                e.target.value = value;
                updateCartItem(productId, value);
            });
        });
        
        // Setup remove events
        document.querySelectorAll('.remove-item').forEach(btn => {
            btn.addEventListener('click', (e) => {
                cart = cart.filter(item => item.id !== e.target.dataset.id);
                updateCart();
                saveCartToLocalStorage();
            });
        });
    }

    // Update Cart Item
    function updateCartItem(productId, quantity) {
        const item = cart.find(item => item.id === productId);
        if (item) {
            item.quantity = quantity;
            updateCart();
            saveCartToLocalStorage();
        }
    }

    // Save Cart to LocalStorage
    function saveCartToLocalStorage() {
        localStorage.setItem('cart', JSON.stringify(cart));
    }

    // Save Customer Info to LocalStorage
    function saveCustomerInfoToLocalStorage() {
        customerInfo = {
            name: customerName.value,
            phone: customerPhone.value,
            phone2: customerPhone2.value,
            address: customerAddress.value,
            governorate: customerGovernorate.value,
            notes: customerNotes.value
        };
        localStorage.setItem('customerInfo', JSON.stringify(customerInfo));
    }

    // Checkout
    function checkout() {
        if (cart.length === 0) {
            showNotification('Your cart is empty, please add products first');
            return;
        }
        
        // Always open checkout form for customer details
        openCheckoutForm();
    }

    // Complete Checkout
    function completeCheckout() {
        // Validate form
        if (!customerName.value || !customerPhone.value || !customerAddress.value || !customerGovernorate.value) {
            showNotification('Please fill in all required fields');
            return;
        }
        
        // Save customer info
        saveCustomerInfoToLocalStorage();
        
        // Close the form
        closeCheckoutForm();
        
        // Send WhatsApp message
        sendWhatsAppMessage();
    }

    // Send WhatsApp message with order details
    function sendWhatsAppMessage() {
        let message = ` New Order from Soie Luxury\n\n`;
        message += `Customer Information:\n`;
        message += `Name: ${customerName.value}\n`;
        message += `Phone: ${customerPhone.value}\n`;
        if (customerPhone2.value) message += `Alternate Phone: ${customerPhone2.value}\n`;
        message += `Address: ${customerAddress.value}\n`;
        message += `Governorate: ${customerGovernorate.value}\n`;
        if (customerNotes.value) message += `Notes: ${customerNotes.value}\n\n`;
        
        message += `Order Details:\n\n`;
        
        cart.forEach(item => {
            const product = products.find(p => p.id === item.id);
            message += ` ${item.name}\n`;
            message += `Quantity: ${item.quantity}\n`;
            message += `Price: ${item.price.toLocaleString()} EGP\n`;
            message += `Total: ${(item.price * item.quantity).toLocaleString()} EGP\n`;
            message += `Image: ${product.images ? product.images[0] : ''}\n\n`;
        });
        
        const totalPrice = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        message += ` Grand Total: ${totalPrice.toLocaleString()} EGP\n\n`;
        message += `Thank you for your order!`;
        
        // Save order to Firebase
        saveOrderToFirebase(totalPrice);
        
        window.open(`https://wa.me/201066367019?text=${encodeURIComponent(message)}`, '_blank');
        
        // Clear cart after checkout
        cart = [];
        saveCartToLocalStorage();
        updateCart();
        closeCart();
    }

    // Save order to Firebase
    function saveOrderToFirebase(totalPrice) {
        const orderData = {
            customerName: customerName.value,
            customerPhone: customerPhone.value,
            customerAddress: customerAddress.value,
            customerGovernorate: customerGovernorate.value,
            items: cart,
            total: totalPrice,
            createdAt: firebase.database.ServerValue.TIMESTAMP
        };
        
        database.ref('orders').push(orderData)
            .then(() => {
                console.log('Order saved to Firebase');
            })
            .catch(error => {
                console.error('Error saving order:', error);
            });
    }

    // Show Admin Dashboard
    function showAdminDashboard() {
        adminDashboard.style.display = 'block';
        overlay.classList.add('active');
        document.body.style.overflow = 'hidden';
        loadAdminProducts();
        loadAnalytics();
    }

    // Load products for admin
    function loadAdminProducts() {
        const productsList = document.getElementById('productsList');
        
        productsList.innerHTML = products.map(product => `
            <div class="product-item" data-id="${product.id}">
                <div class="product-item-info">
                    <h4>${product.name}</h4>
                    <p>${product.price} EGP - ${product.category}</p>
                    ${product.images && product.images.length > 0 ? 
                      `<img src="${product.images[0]}" alt="${product.name}" style="width: 50px; height: 50px; object-fit: cover;">` : ''}
                </div>
                <div class="product-item-actions">
                    <button class="edit-product" data-id="${product.id}">Edit</button>
                    <button class="delete-product" data-id="${product.id}">Delete</button>
                </div>
            </div>
        `).join('');
        
        // Add event listeners
        document.querySelectorAll('.edit-product').forEach(btn => {
            btn.addEventListener('click', () => {
                const productId = btn.dataset.id;
                const product = products.find(p => p.id === productId);
                
                if (product) {
                    document.getElementById('productId').value = product.id;
                    document.getElementById('productName').value = product.name;
                    document.getElementById('productPrice').value = product.price;
                    document.getElementById('productCategory').value = product.category;
                    document.getElementById('productDescription').value = product.description || '';
                    document.getElementById('productBestSeller').checked = product.isBestSeller || false;
                    document.getElementById('productHasOffer').checked = product.hasOffer || false;
                    document.getElementById('productSoldOut').checked = product.soldOut || false;
                    
                    // Display existing images
                    imagePreviewContainer.innerHTML = '';
                    productImages = [];
                    if (product.images && product.images.length > 0) {
                        product.images.forEach(imageUrl => {
                            addImageToPreview(imageUrl);
                            productImages.push(imageUrl);
                        });
                    }
                }
            });
        });
        
        document.querySelectorAll('.delete-product').forEach(btn => {
            btn.addEventListener('click', async () => {
                const productId = btn.dataset.id;
                await deleteProduct(productId);
            });
        });
    }

    // Load analytics
    function loadAnalytics() {
        totalProductsElement.textContent = products.length;
        // The other metrics are updated in real-time by the orders listener
    }

    // Add image to preview
    function addImageToPreview(imageUrl) {
        if (productImages.length >= 5) {
            showNotification("You can add maximum 5 images");
            return;
        }
        
        const imageItem = document.createElement('div');
        imageItem.className = 'image-preview-item';
        imageItem.innerHTML = `
            <img src="${imageUrl}">
            <button class="remove-image-btn" data-url="${imageUrl}"></button>
        `;
        imagePreviewContainer.appendChild(imageItem);
        
        // Add event listener to remove button
        imageItem.querySelector('.remove-image-btn').addEventListener('click', (e) => {
            e.preventDefault();
            const urlToRemove = e.target.dataset.url;
            productImages = productImages.filter(img => img !== urlToRemove);
            imageItem.remove();
        });
        
        productImages.push(imageUrl);
    }

    // Save product to Firebase
    async function saveProduct(productData) {
        try {
            const productId = document.getElementById('productId').value;
            
            // Prepare product data
            const productToSave = {
                name: productData.name,
                price: parseFloat(productData.price),
                category: productData.category,
                description: productData.description || '',
                images: productImages,
                isBestSeller: productData.isBestSeller || false,
                hasOffer: productData.hasOffer || false,
                soldOut: productData.soldOut || false
            };
            
            if (productId) {
                // Update existing product
                await database.ref(`products/${productId}`).update(productToSave);
                showNotification('Product updated successfully!');
            } else {
                // Add new product
                const newProductRef = database.ref('products').push();
                await newProductRef.set({
                    ...productToSave,
                    createdAt: firebase.database.ServerValue.TIMESTAMP
                });
                showNotification('Product added successfully!');
            }
            
            // Reset form
            productForm.reset();
            document.getElementById('productId').value = '';
            imagePreviewContainer.innerHTML = '';
            productImages = [];
        } catch (error) {
            console.error("Error saving product:", error);
            showNotification('Error saving product');
        }
    }

    // Delete product from Firebase
    async function deleteProduct(productId) {
        if (!confirm('Are you sure you want to delete this product?')) return;
        
        try {
            await database.ref(`products/${productId}`).remove();
            showNotification('Product deleted successfully!');
        } catch (error) {
            console.error("Error deleting product:", error);
            showNotification('Error deleting product');
        }
    }

    // Setup Event Listeners
    function setupEventListeners() {
        // Open/Close Cart
        if (floatingCart) floatingCart.addEventListener('click', openCart);
        if (cartIcon) cartIcon.addEventListener('click', openCart);
        if (closeCartBtn) closeCartBtn.addEventListener('click', closeCart);
        if (overlay) overlay.addEventListener('click', closeCart);
        
        // Filter buttons
        if (filterBtn) filterBtn.addEventListener('click', openFilterModal);
        if (closeFilterBtn) closeFilterBtn.addEventListener('click', closeFilterModal);
        if (applyFiltersBtn) applyFiltersBtn.addEventListener('click', applyFilters);
        
        // Sort buttons
        if (sortBtn) sortBtn.addEventListener('click', openSortModal);
        if (closeSortBtn) closeSortBtn.addEventListener('click', closeSortModal);
        document.querySelectorAll('.sort-option').forEach(option => {
            option.addEventListener('click', function() {
                currentSort = this.dataset.sort;
                document.querySelectorAll('.sort-option').forEach(opt => {
                    opt.classList.remove('active');
                });
                this.classList.add('active');
                renderProducts();
                setupImageSliders();
                closeSortModal();
            });
        });
        
        // Feedback buttons
        if (feedbackBtn) feedbackBtn.addEventListener('click', openFeedbackModal);
        if (closeFeedbackBtn) closeFeedbackBtn.addEventListener('click', closeFeedbackModal);
        
        // Fullscreen image viewer
        if (closeFullscreenBtn) closeFullscreenBtn.addEventListener('click', closeFullscreen);
        if (overlay) overlay.addEventListener('click', closeFullscreen);
        
        // Quick Menu
        document.getElementById('mainPageBtn').addEventListener('click', (e) => {
            e.preventDefault();
            setActiveMenu('mainPageBtn');
            currentView = 'all';
            renderProducts();
            setupImageSliders();
        });
        
        document.getElementById('bestSellersBtn').addEventListener('click', (e) => {
            e.preventDefault();
            setActiveMenu('bestSellersBtn');
            currentView = 'bestsellers';
            renderProducts();
            setupImageSliders();
        });
        
        document.getElementById('wishlistBtn').addEventListener('click', (e) => {
            e.preventDefault();
            setActiveMenu('wishlistBtn');
            currentView = 'wishlist';
            renderProducts();
            setupImageSliders();
        });
        
        document.getElementById('offersBtn').addEventListener('click', (e) => {
            e.preventDefault();
            setActiveMenu('offersBtn');
            currentView = 'offers';
            renderProducts();
            setupImageSliders();
        });
        
        // Checkout
        if (checkoutBtn) checkoutBtn.addEventListener('click', checkout);
        
        // Dark Mode
        if (darkModeToggle) darkModeToggle.addEventListener('click', toggleDarkMode);
        
        // Wishlist icon in nav
        if (wishlistIcon) wishlistIcon.addEventListener('click', (e) => {
            e.preventDefault();
            setActiveMenu('wishlistBtn');
            currentView = 'wishlist';
            renderProducts();
            setupImageSliders();
        });
        
        // Login/Logout functionality
        if (loginIcon) loginIcon.addEventListener('click', (e) => {
            e.preventDefault();
            if (currentUser && currentUser.email === ADMIN_EMAIL) {
                showAdminDashboard();
            } else {
                loginModal.classList.add('active');
                overlay.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        });

        if (closeLoginBtn) closeLoginBtn.addEventListener('click', () => {
            loginModal.classList.remove('active');
            overlay.classList.remove('active');
            document.body.style.overflow = 'auto';
        });

        if (loginForm) loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('userEmail').value;
            const password = document.getElementById('userPassword').value;
            
            // Hardcoded authentication (for demo only)
            if (email === ADMIN_EMAIL && password === ADMIN_PASSWORD) {
                currentUser = { email: ADMIN_EMAIL, isAdmin: true };
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                updateUserDisplay();
                showNotification('Login successful!');
                loginModal.classList.remove('active');
                overlay.classList.remove('active');
                document.body.style.overflow = 'auto';
                
                // Show admin dashboard
                showAdminDashboard();
            } else {
                showNotification('Invalid email or password');
            }
        });

        if (logoutBtn) logoutBtn.addEventListener('click', () => {
            currentUser = null;
            localStorage.removeItem('currentUser');
            updateUserDisplay();
            showNotification('You have been logged out');
            adminDashboard.style.display = 'none';
            overlay.classList.remove('active');
            document.body.style.overflow = 'auto';
        });

        // Admin dashboard events
        if (closeAdminBtn) closeAdminBtn.addEventListener('click', () => {
            adminDashboard.style.display = 'none';
            overlay.classList.remove('active');
            document.body.style.overflow = 'auto';
        });

        // Admin tab switching
        document.querySelectorAll('.admin-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.admin-tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.admin-tab-content').forEach(c => c.classList.remove('active'));
                
                tab.classList.add('active');
                document.getElementById(`${tab.dataset.tab}Tab`).classList.add('active');
                
                if (tab.dataset.tab === 'analytics') {
                    loadAnalytics();
                }
            });
        });

        // Product form submission
        if (productForm) productForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const productData = {
                name: document.getElementById('productName').value,
                price: parseFloat(document.getElementById('productPrice').value),
                category: document.getElementById('productCategory').value,
                description: document.getElementById('productDescription').value,
                isBestSeller: document.getElementById('productBestSeller').checked,
                hasOffer: document.getElementById('productHasOffer').checked,
                soldOut: document.getElementById('productSoldOut').checked
            };
            
            try {
                await saveProduct(productData);
            } catch (error) {
                console.error("Error in product submission:", error);
            }
        });

        // Add image button
        if (addImageBtn) addImageBtn.addEventListener('click', (e) => {
            e.preventDefault();
            const imageUrl = imageLinkInput.value.trim();
            
            if (!imageUrl) {
                showNotification("Please enter an image URL");
                return;
            }
            
            // Add to preview and array
            addImageToPreview(imageUrl);
            
            // Clear input
            imageLinkInput.value = '';
        });

        // Add feedback button
        if (addFeedbackBtn) addFeedbackBtn.addEventListener('click', (e) => {
            e.preventDefault();
            addFeedback();
        });

        // Checkout form submission
        if (checkoutForm) checkoutForm.addEventListener('submit', (e) => {
            e.preventDefault();
            completeCheckout();
        });

        // Cancel checkout button
        if (cancelCheckoutBtn) cancelCheckoutBtn.addEventListener('click', (e) => {
            e.preventDefault();
            closeCheckoutForm();
        });

        // Add category button
        if (addCategoryBtn) addCategoryBtn.addEventListener('click', (e) => {
            e.preventDefault();
            addCategory();
        });
    }

    // Initialize the store
    document.addEventListener('DOMContentLoaded', initStore);
</script>
</body>
</html>
